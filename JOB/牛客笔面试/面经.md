[【游戏开发面经汇总】- 计算机基础篇](https://zhuanlan.zhihu.com/p/417640759)

https://zhuanlan.zhihu.com/p/624285893

# c++

## 新特性

![image-20240706150753137](./img/image-20240706150753137.png)



## 手撕代码

### atoi (ascii to int )

```c
#include <stdio.h>
#include <stdlib.h>﻿
#include <assert.h>

int isempty(char* str)
{
    if (str == ' ' ||
        str == '\t' ||
        str == '\n' ||
        str == '\f' ||
        str == '\v' ||
        str == '\r')
    {
        return 1;
    }
    return 0;
}

int isnumber(char* str)
{
    if (str >= '0' && str <= '9')
    {
        return 1;
    }
    return 0;
}

int  my_atoi(char* str)
{
    assert(str != NULL);
    char sign;
    int flag = 0;
    while (isempty(*str)==1)//判断是否为空
    {
        str++;
    }
    sign = *str;
    if (sign == '-' || sign == '+')
    {
        str++;
    }
    while (isnumber(*str) == 1)//判断是否为数字
    {
        flag = 10 * flag + (*str - '0');//在循环过程中，每次处理一个数字字符时，我们需要将其转换成对应的整数值，并将其累加到已经转换好的部分上。
                                        //乘以10的目的是为了将已经转换好的部分向左移动一位，为新的数字字符腾出位置。
        str++;
    }
    return sign == '-' ? -flag : flag;
}


int main()
{
    const char* str1 = "123";
    const char* str2 = "-123abc12";
    const char* str3 = "abc";
    int value1 = my_atoi(str1);
    int value2 = my_atoi(str2);
    int value3 = my_atoi(str3); 
    printf("Value of str1: %d\n", value1);//123
    printf("Value of str2: %d\n", value2);//-123
    printf("Value of str3: %d\n", value3); //0
    return 0;
}
                        
原文链接：https://blog.csdn.net/qq_57425280/article/details/133438479
```

```c
#include<stdio.h>
#include<stdlib.h>
#include<ctype.h>
int my_atoi(const char* str)
{
	assert(str);
	//用isspace函数向后过滤空白字符
	//isspace返回值不为0，代表是空格
	while (isspace(*str))
	{
		str++;
	}//走到这里str一定不是空格了
	if (*str == '\0')//空字符串问题
	{
		return 0;
	}
	//+-号问题
	int flg = 1;
	if (*str == '+')
	{
		flg = 1;
		str++;
	}//注意这里要用else if，不能用else
	else if(*str == '-')
	{
		flg = -1;
		str++;
	}
	long long n = 0;
	while (*str != "\0")
	{
		if (isdigit(*str))
		{//是数字字符==>返回值不为0
			n = n * 10 + (*str - '\0') * flg;
		}
		else//不是数字字符
		{
			return (int)n;
		}
		str++;
	}
	return (int)n;
}
int main()
{
	int ret = my_atoi("123");
	printf("&d\n", ret);
	return 0;
}
```



### iota下标绑定排序

```c
iota(id.begin(), id.end(), 0);
sort(id.begin(), id.end(), [&](int i, int j)  {return indices[i] > indices[j];});
```

### 翻转链表

柠檬微趣：vscode共享屏幕写，自己写结构体和测试案例

```c
#include<iostream>
using namespace std;


class Node
{
public:
    Node(int x):val(x){};
    Node* next = nullptr;
    int val;
};

Node* reverse(Node* head)
{
    Node* pre = nullptr;
    Node* nd;
    while(head!=nullptr)
    {
        nd = head->next;
        head->next = pre;
        pre = head;
        head = nd;
    }
    return pre;
}

int main()
{
    Node* a = new Node(1);
    Node* a1 = new Node(2);
    Node* a2 = new Node(3);
    Node* a3 = new Node(4);
    Node* a4 = new Node(5);
    a->next = a1;
    a1->next = a2;
    a2->next = a3;
    a3->next = a4;
    a = reverse(a);
    while(a!=nullptr)
    {
        cout << a->val <<endl;
        a = a->next;
    }
    return 0;
}
```

### 实现类似共享指针的功能

柠檬微趣：需要实现有参无参构造，析构函数，拷贝构造，赋值语句，移动构造，

```c
#include<iostream>
using namespace std;

template<class T>
class Shareptr
{
public:
    Shareptr(){
        cnt = new int(1);
    };
    Shareptr(T other):{
        ptr = new T(other)
        cnt = new int(1);
    };
    Shareptr(const Shareptr& other){
        ptr = new T(*other.ptr);
        cnt = new int(1);
    };
    ~Shareptr(){
        if(--(*cnt)==0)
        {
            delete ptr;
            delete cnt;
        }
    };
    Shareptr(const Shareptr&& other){
        ptr = other.ptr;
        delete other.ptr;
        other.ptr = nullptr;
        cnt = *(other.cnt);
    };
    operator=(const Shareptr& other)
    {
        if(--(*cnt)==0)
        {
            delete ptr;
            delete cnt;
        }
        ptr = other.ptr;
        cnt = ++*(other->cnt);
    };
private:
    T* ptr;
    int* cnt;
};

```

